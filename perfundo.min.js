!function(){function e(e,t,n){for(var o in t){var s=t[o],i=e.element.getAttribute("data-"+o.toLowerCase());"number"==typeof s?e.options[o]=parseInt(i):s===!1?e.options[o]=null!==i:s instanceof Function?e.options[o]=null:e.options[o]=i,e.options[o]||0===e.options[o]||(e.options[o]=o in n?n[o]:s)}}function t(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function n(e,t){return s.call((t||document).querySelectorAll(e))}var o=function(s,i){var c=this;if("string"==typeof s&&n(s).length>1){var a=[];return n(s).forEach(function(e){a.push(new o(e,i))}),a}if(c.element=t(s),c.options={},!c.element)return{};if(i=i||{},e(c,{disableHistory:!1,swipe:!0,classNames:{link:"perfundo__link",overlay:"perfundo__overlay",content:"perfundo__content",close:"perfundo__close",prev:"perfundo__prev",next:"perfundo__next",untarget:"perfundo__untarget",active:"is-active"}},i),t.bind(n("."+c.options.classNames.link,c.element),{click:function(e){c.options.disableHistory&&e.preventDefault(),c.open(this.getAttribute("href"))}}),t.bind(c.element,{click:function(e){(e.target.classList.contains(c.options.classNames.close)||e.target.classList.contains(c.options.classNames.overlay))&&(c.options.disableHistory&&e.preventDefault(),c.close())}}),c.options.swipe){var r,l,u=0,p=0,f=0,d=0,v=50,m=60;t.bind(n("."+c.options.classNames.content,c.element),{touchstart:function(e){u=e.changedTouches[0].clientX,p=e.changedTouches[0].clientY},touchend:function(e){f=e.changedTouches[0].clientX,d=e.changedTouches[0].clientY,r=u-f,l=p-d,Math.abs(r)>=v&&Math.abs(l)<=m&&(r>v?c.next():c.prev()),u=0,p=0,f=0,d=0,r=null,l=null}})}};o.prototype={open:function(e){var n=this,e=t(e);n.close(),e.classList.add(n.options.classNames.active)},close:function(){var e=this;n("."+e.options.classNames.overlay+"."+e.options.classNames.active,e.element).forEach(function(t){t.classList.remove(e.options.classNames.active)})},next:function(){var e=this,n=t("."+e.options.classNames.next,e.element);n&&n.click()},prev:function(){var e=this,n=t("."+e.options.classNames.prev,e.element);n&&n.click()}};var s=Array.prototype.slice;return t.bind=function(e,t){e&&(e=e.length?e:[e],e.forEach(function(e){for(var n in t){var o=t[n];n.split(/\s+/).forEach(function(t){e.addEventListener(t,o)})}}))},o.$=t,o.$$=n,"undefined"!=typeof self&&(self.perfundo=o),"object"==typeof module&&module.exports&&(module.exports=o),o}();